<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>weGuard</title>
  <meta name="description" content="KODEGAS Project" />
  <meta name="author" content="KODEGAS" />

  <meta property="og:title" content="weGuard" />
  <meta property="og:description" content="KODEGAS Project" />


  <!-- Primary Meta Tags -->
  <title>WeGuard - AI Crop Disease Detection for Smart Farming</title>
  <meta name="title" content="WeGuard - AI Crop Disease Detection for Smart Farming" />
  <meta name="description"
    content="Protect your crops with WeGuard's intelligent AI disease detection system. Get instant crop health analysis, expert treatment advice, and 24/7 agricultural support with 90% accuracy rate. Transform your farming with smart technology." />
  <meta name="keywords"
    content="AI crop disease detection, agricultural technology, farming software, crop health monitoring, plant disease identification, precision agriculture, smart farming, agricultural AI, crop protection, farming app, disease diagnosis, agricultural expert advice" />
  <meta name="author" content="KODEGAS" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="English" />
  <meta name="theme-color" content="#22c55e" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://weguard.kodegas.com/" />

  <!-- Open Graph / Facebook -->

  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://weguard.kodegas.com/" />
  <meta property="og:title" content="WeGuard - AI-Powered Crop Disease Detection & Agricultural Management" />
  <meta property="og:description"
    content="Revolutionary AI platform helping farmers detect crop diseases instantly with 90% accuracy. Get expert treatment recommendations, weather insights, and 24/7 agricultural support." />
  <meta property="og:image" content="https://weguard.kodegas.com/uploads/logo.png" />
  <meta property="og:image:alt" content="WeGuard AI Crop Disease Detection Platform Interface" />
  <meta property="og:site_name" content="WeGuard by KODEGAS" />
  <meta property="og:locale" content="en_US" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://weguard.kodegas.com/" />
  <meta property="twitter:title" content="WeGuard - AI Crop Disease Detection for Smart Farming" />
  <meta property="twitter:description"
    content="Transform agriculture with AI-powered disease detection, expert advice, and smart crop management. 90% accuracy, 24/7 support, helping 150+ farmers protect their harvests." />
  <meta property="twitter:image" content="https://weguard.kodegas.com/twitter-image.jpg" />
  <meta property="twitter:image:alt" content="WeGuard AI Agricultural Technology Platform" />

  <!-- Additional Meta Tags for Local SEO -->
  <meta name="geo.region" content="LK" />
  <meta name="geo.placename" content="Sri Lanka" />
  <meta name="application-name" content="WeGuard" />

  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "WeGuard",
      "applicationCategory": "BusinessApplication",
      "applicationSubCategory": "Agricultural Technology",
      "operatingSystem": "Web Browser, iOS, Android",
      "url": "https://weguard.kodegas.com/",
      "description": "AI-powered crop disease detection and agricultural management platform helping farmers identify plant diseases, get expert treatment advice, and optimize crop health with 90% accuracy rate.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "publisher": {
        "@type": "Organization",
        "name": "KODEGAS",
        "url": "https://kodegas.com/",
        "sameAs": [
          "https://github.com/KODEGAS"
        ]
      },
      "featureList": [
        "AI Crop Disease Detection",
        "Expert Agricultural Advice",
        "Weather Monitoring",
        "Disease Database",
        "Treatment Recommendations",
        "24/7 Support",
        "Multi-language Support"
      ],
      "screenshot": "https://weguard.kodegas.com/screenshot.jpg",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "150"
      }
    }
    </script>

  <!-- Favicon and Icons -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/manifest.json" />

  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- DNS Prefetch for External Resources -->
  <link rel="dns-prefetch" href="//api.openweathermap.org" />
  <link rel="dns-prefetch" href="//firebase.googleapis.com" />

  <!-- Additional SEO Meta Tags -->
  <meta name="format-detection" content="telephone=no" />
  <meta name="mobile-web-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js', { scope: '/' })
          .then((registration) => {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);

            // Check if the app can be installed
            window.addEventListener('beforeinstallprompt', (e) => {
              console.log('PWA install prompt available!');
              e.preventDefault();
              // Store the event for later use
              window.deferredPrompt = e;

              // Show custom install button
              showInstallButton();
            });

            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
              console.log('App is already installed');
            }
          })
          .catch((error) => {
            console.log('ServiceWorker registration failed: ', error);
          });
      });
    } else {
      console.log('Service Worker not supported');
    }

    function showInstallButton() {
      // Create install button
      const installButton = document.createElement('button');
      installButton.innerHTML = 'ðŸ“± Install WeGuard App';
      installButton.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #22c55e;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transition: all 0.3s ease;
      `;
      installButton.onmouseover = () => installButton.style.transform = 'scale(1.05)';
      installButton.onmouseout = () => installButton.style.transform = 'scale(1)';

      installButton.onclick = async () => {
        if (window.deferredPrompt) {
          window.deferredPrompt.prompt();
          const { outcome } = await window.deferredPrompt.userChoice;
          console.log('Install outcome:', outcome);
          window.deferredPrompt = null;
          installButton.remove();
        }
      };

      document.body.appendChild(installButton);

      // Auto-hide after 10 seconds
      setTimeout(() => {
        if (installButton.parentNode) {
          installButton.remove();
        }
      }, 10000);
    }

    // Debug PWA status
    window.addEventListener('load', () => {
      setTimeout(() => {
        console.log('=== PWA Debug Info ===');
        console.log('Service Worker support:', 'serviceWorker' in navigator);
        console.log('Manifest link exists:', !!document.querySelector('link[rel="manifest"]'));
        console.log('Is HTTPS or localhost:', location.protocol === 'https:' || location.hostname === 'localhost');
        console.log('Display mode:', window.matchMedia('(display-mode: standalone)').matches ? 'standalone' : 'browser');
        console.log('User agent:', navigator.userAgent);
      }, 2000);
    });
  </script>
</body>

</html>